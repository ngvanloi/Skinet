<div class="container mt-2">
    <div class="row">
        <div class="col-8">
            <app-stepper
                *ngIf="checkoutForm"
                [linearModeSelected]="false"
                #appStepper
            >
                <cdk-step
                    [label]="'Address'"
                    [completed]="checkoutForm.get('addressForm')?.valid"
                >
                    <app-checkout-address [checkoutForm]="checkoutForm"></app-checkout-address>
                </cdk-step>
                <cdk-step
                    [label]="'Delivery'"
                    [completed]="checkoutForm.get('deliveryForm')?.valid"
                >
                    <app-checkout-delivery [checkoutForm]="checkoutForm"></app-checkout-delivery>
                </cdk-step>
                <cdk-step [label]="'Review'">
                    <app-checkout-review [appStepper]="appStepper"></app-checkout-review>
                </cdk-step>
                <cdk-step
                    [label]="'Payment'"
                    [completed]="checkoutForm.get('paymentForm')?.valid"
                >
                    <app-checkout-payment [checkoutForm]="checkoutForm"></app-checkout-payment>
                </cdk-step>
            </app-stepper>
        </div>
        <div
            *ngIf="(basketTotal$ | async) as basketTotal"
            class="col-4"
        >
            <app-order-totals
                [shippingPrice]="basketTotal.shipping"
                [subtotal]="basketTotal.subtotal"
                [total]="basketTotal.total"
            ></app-order-totals>
        </div>
    </div>
</div>